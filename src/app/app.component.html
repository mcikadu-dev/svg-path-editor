<div style="display:flex;flex-direction:row;height: 100%;" @leftColumnParent>
    <div *ngIf="isLeftPanelOpened" @leftColumn (@leftColumn.done)="canvas?.refreshCanvasSize()" class="left-column-wrapper">
        <button mat-raised-button class="left-column-close"
            (click)="toggleLeftPanel()"
        >
            <mat-icon class="material-symbols-rounded">arrow_left</mat-icon>
        </button>
        <div class="left-column" cdk-scrollable>
            <app-expandable panelTitle="Path" [panelInfo]="rawPath.length.toString()" [opened]="true">
                <div class="row">
                    <div class="input-block" style="flex-grow:1"  [class.has-error]="invalidSyntax">
                        <label class="opaque">Path</label>
                        <textarea
                            [ngModel]="rawPath"
                            (ngModelChange)="reloadPath($event, $event.length > 0)"
                            class="app-input"
                            style="height:100px;"
                            placeholder="Tempel path SVG di sini"
                            (focus)="setHistoryDisabled(true)"
                            (blur)="setHistoryDisabled(false)"
                            matTooltip="Path tidak valid"
                            matTooltipPosition="below"
                            matTooltipClass="app-tooltip"
                            [matTooltipDisabled]="!invalidSyntax"
                        ></textarea>
                    </div>
                </div>
                <div class="path-buttons">

                    <app-open (openPath)="openPath($event.path, $event.name)" style="margin-left: 6px;"></app-open>
                    <app-save [path]="rawPath" [(name)]="pathName"></app-save>

                    <button mat-mini-fab
                        color="primary"
                        style="transform: none; margin:0 4px;"
                        matTooltip="Hapus path"
                        matTooltipPosition="below"
                        matTooltipClass="app-tooltip"
                        (click)="reloadPath('', false)"
                    >
                        <mat-icon class="material-symbols-rounded">clear</mat-icon>
                    </button>

                    <button mat-mini-fab
                        color="accent"
                        style="transform: none; margin:0 10px 0 auto;"
                        [matMenuTriggerFor]="appCreate"
                        [matMenuTriggerData]="{item:null, idx:-1}"
                        matTooltip="Tambah perintah baru"
                        matTooltipPosition="below"
                        matTooltipClass="app-tooltip"
                    >
                        <mat-icon class="material-symbols-rounded">add</mat-icon>
                    </button>
                </div>
            </app-expandable>

            <app-expandable panelTitle="Konfigurasi" [opened]="true">
                <div class="row">
                    <div class="input-block" [ngClass]="{'disabled': cfg.viewPortLocked }">
                        <label>X</label>
                        <input
                            class="app-input"
                            appFormatter
                            [numberValue]="cfg.viewPortX"
                            (numberValueChange)="updateViewPort($event, cfg.viewPortY, cfg.viewPortWidth, cfg.viewPortHeight)"
                            [disabled]="cfg.viewPortLocked"
                        >
                    </div>
                    <div class="input-block" [ngClass]="{'disabled': cfg.viewPortLocked }">
                        <label>Y</label>
                        <input
                            class="app-input"
                            appFormatter
                            [numberValue]="cfg.viewPortY"
                            (numberValueChange)="updateViewPort(cfg.viewPortX, $event, cfg.viewPortWidth, cfg.viewPortHeight)"
                            [disabled]="cfg.viewPortLocked"
                        >
                    </div>
                    <div class="input-block" [ngClass]="{'disabled': cfg.viewPortLocked }">
                        <label>Lebar</label>
                        <input
                            class="app-input"
                            appFormatter
                            formatterType="positive-float"
                            [numberValue]="cfg.viewPortWidth"
                            (numberValueChange)="updateViewPort(cfg.viewPortX, cfg.viewPortY, $event, null)"
                            [disabled]="cfg.viewPortLocked"
                        >
                    </div>
                    <div class="input-block" [ngClass]="{'disabled': cfg.viewPortLocked }">
                        <label>Tinggi</label>
                        <input
                            class="app-input"
                            appFormatter
                            formatterType="positive-float"
                            [numberValue]="cfg.viewPortHeight"
                            (numberValueChange)="updateViewPort(cfg.viewPortX, cfg.viewPortY, null, $event)"
                            [disabled]="cfg.viewPortLocked"
                        >
                    </div>

                    <button
                        mat-flat-button
                        (click)="cfg.viewPortLocked = !cfg.viewPortLocked"
                        [matTooltip]="cfg.viewPortLocked ? 'Buka viewBox' : 'Kunci viewBox'"
                        matTooltipPosition="right"
                        class="mat-flat-button"
                    >
                        <mat-icon class="material-symbols-rounded" *ngIf="!cfg.viewPortLocked">lock_open</mat-icon>
                        <mat-icon class="material-symbols-rounded" *ngIf="cfg.viewPortLocked">lock</mat-icon>
                    </button>
                </div>
                <div class="row">
                    <mat-checkbox [(ngModel)]="cfg.snapToGrid" style="flex:1">Kaitkan ke kisi</mat-checkbox>
                    <div class="input-block" style="flex:1"
                        matTooltip="Jumlah desimal saat titik digeser"
                        matTooltipPosition="right"
                        [matTooltipDisabled]="cfg.snapToGrid"
                        [ngClass]="{'disabled': cfg.snapToGrid }"
                    >
                        <label>Presisi titik</label>
                        <input
                            class="app-input"
                            appFormatter
                            formatterType="positive-integer"
                            [(numberValue)]="cfg.decimalPrecision"
                            [disabled]="cfg.snapToGrid">
                    </div>
                </div>
                <div class="row">
                    <mat-checkbox [(ngModel)]="cfg.showTicks" style="flex:1">Tampilkan penanda</mat-checkbox>
                    <div class="input-block" style="flex:1"
                        [ngClass]="{'disabled': !cfg.showTicks }"
                    >
                        <label>Selang</label>
                        <input
                            class="app-input"
                            appFormatter
                            formatterType="positive-integer"
                            [(numberValue)]="cfg.tickInterval"
                            [disabled]="!cfg.showTicks">
                    </div>
                </div>
                <div class="row">
                    <mat-checkbox [(ngModel)]="cfg.filled" style="flex:1">Isi</mat-checkbox>
                    <mat-checkbox [ngModel]="cfg.minifyOutput" (ngModelChange)="cfg.minifyOutput=$event;afterModelChange()" style="flex:1">Ringkas output</mat-checkbox>
                </div>

            </app-expandable>

            <app-expandable panelTitle="Operasi path" [opened]="true">
                <div class="row path-operations-grid">
                    <div class="input-block" style="flex:1">
                        <label>Skala X</label>
                        <input appFormatter [(numberValue)]="scaleX" class="app-input" >
                    </div>
                    <div class="input-block" style="flex:1">
                        <label>Skala Y</label>
                        <input appFormatter [(numberValue)]="scaleY" class="app-input">
                    </div>
                    <button
                        mat-flat-button
                        (click)="scale(scaleX, scaleY)"
                        style="flex:1"
                        matTooltip="Skalakan seluruh path sesuai nilai"
                        matTooltipPosition="right"
                        class="mat-flat-button"
                    >Skala</button>
                </div>

                <div class="row path-operations-grid">
                    <div class="input-block" style="flex:1">
                        <label>Geser X</label>
                        <input appFormatter [(numberValue)]="translateX" class="app-input">
                    </div>
                    <div class="input-block" style="flex:1">
                        <label>Geser Y</label>
                        <input appFormatter [(numberValue)]="translateY" class="app-input">
                    </div>
                    <button
                        mat-flat-button
                        (click)="translate(translateX, translateY)"
                        style="flex:1"
                        matTooltip="Geser seluruh path sesuai nilai"
                        matTooltipPosition="right"
                        class="mat-flat-button"
                    >Geser</button>
                </div>

                <div class="row path-operations-grid4">
                    <div class="input-block" style="flex:1">
                        <label>Titik asal X</label>
                        <input appFormatter [(numberValue)]="rotateX" class="app-input">
                    </div>
                    <div class="input-block" style="flex:1">
                        <label>Titik asal Y</label>
                        <input appFormatter [(numberValue)]="rotateY" class="app-input">
                    </div>
                    <div class="input-block" style="flex:1">
                        <label>Sudut</label>
                        <input appFormatter suffix="Â°" [(numberValue)]="rotateAngle" class="app-input">
                    </div>
                    <button
                        mat-flat-button
                        (click)="rotate(rotateX, rotateY, rotateAngle)"
                        style="flex:1"
                        matTooltip="Rotasi seluruh path berdasarkan sudut (derajat) dari titik yang ditentukan"
                        matTooltipPosition="right"
                        class="mat-flat-button"
                    >Rotasi</button>
                </div>

                <div class="row path-operations-grid">
                    <div class="input-block" style="grid-column: span 2;">
                        <label>Jumlah desimal</label>
                        <input appFormatter formatterType="positive-integer" [(numberValue)]="roundValuesDecimals" class="app-input">
                    </div>
                    <button
                        mat-flat-button
                        (click)="roundValues(roundValuesDecimals)"
                        style="flex:1"
                        matTooltip="Bulatkan semua nilai sesuai jumlah desimal"
                        matTooltipPosition="right"
                        class="mat-flat-button"
                    >Bulatkan</button>
                </div>

                <div class="row">
                    <button mat-flat-button
                        (click)="setRelative(true)"
                        matTooltip="Ubah semua perintah menjadi relatif"
                        style="flex:1"
                        class="mat-flat-button"
                    >Ubah ke relatif</button>
                    <button mat-flat-button
                        (click)="setRelative(false)"
                        matTooltip="Ubah semua perintah menjadi absolut"
                        style="flex:1"
                        class="mat-flat-button"
                    >Ubah ke absolut</button>
                </div>
                <div class="row">
                    <button mat-flat-button
                        (click)="reverse()"
                        matTooltip="Balikkan urutan perintah path"
                        style="flex:1"
                        class="mat-flat-button"
                    >Balikkan</button>
                    <button mat-flat-button
                        (click)="optimize()"
                        matTooltip="Optimalkan path dengan menghapus komponen yang tidak diperlukan, ubah tipe, dan atur ulang urutan"
                        style="flex:1"
                        class="mat-flat-button"
                    >Optimalkan</button>
                </div>
            </app-expandable>


            <app-expandable panelTitle="Perintah" [opened]="true">
                <div *ngFor="let item of parsedPath.path; let j=index"
                    (mouseenter)="hoveredItem=item"
                    (mouseleave)="hoveredItem=null"
                    [ngClass]="{
                        hovered:item===hoveredItem && !draggedPoint,
                        dragged:(draggedPoint && item===draggedPoint.itemReference) || (focusedItem === item)
                    }"
                    class="row"
                    style="padding-top:1px; padding-bottom:1px;"
                    (click)="focusedItem=item"
                    id="svg_command_row_{{j}}"
                >
                    <div
                        class="type-token"
                        [ngClass]="{'type-token-relative':item.relative}"
                        style="user-select: none;-webkit-user-select: none;"
                        (click)="item.setRelative(!item.relative); afterModelChange();"
                    >{{item.getType()}}</div>
                    <ng-container *ngFor="let value of item.values; let i = index; trackBy:trackByIndex">
                        <mat-checkbox *ngIf="item.getType().toLowerCase()==='a' && (i===3 || i===4)"
                            [ngModel]="value"
                            (ngModelChange)="setValue(item,i,$event?1:0);"
                            (focus)="focusedItem=item"
                            class="small-checkbox"
                            matTooltipClass="app-tooltip"
                            [matTooltip]="getTooltip(item, i)"
                        ></mat-checkbox>
                        <input *ngIf="!(item.getType().toLowerCase()==='a' && (i===3 || i===4))"
                            type="text"
                            appKeyboardNavigable
                            keyboardNavigableIdPrefix="svg_command"
                            appFormatter
                            [numberValue]="value"
                            (numberValueChange)="setValue(item,i,$event);"
                            class="svg-value app-input"
                            id="svg_command_{{j}}_{{item.getType().toLowerCase()==='a' && i>4 ? i-1 : i}}"
                            (focus)="focusedItem=item"
                            matTooltipClass="app-tooltip"
                            [matTooltip]="getTooltip(item, i)"
                        >
                    </ng-container>

                    <div style="flex:1"></div>
                    <button mat-icon-button [matMenuTriggerFor]="appMenu" [matMenuTriggerData]="{item:item, idx:j}" class="more-button">
                        <mat-icon class="material-symbols-rounded">more_horiz</mat-icon>
                    </button>
                </div>
            </app-expandable>
            <div class="spacer"></div>
        </div>
    </div>

    <div class="drawings">
        <button mat-raised-button class="left-column-open" *ngIf="!isLeftPanelOpened"
        (click)="toggleLeftPanel()"
        >
            <mat-icon class="material-symbols-rounded">arrow_right</mat-icon>
        </button>
        <button mat-mini-fab *ngIf="((!draggedPoint && focusedItem) || parsedPath.path.length===0) && !(cfg.preview || isEditingImages)"
            color="accent"
            class="add-button"
            [ngStyle]="{
                'left': 6+((focusedItem ? focusedItem.targetLocation().x : 0)-cfg.viewPortX)/strokeWidth+'px',
                'top': 6+((focusedItem ? focusedItem.targetLocation().y : 0)-cfg.viewPortY)/strokeWidth+'px'
            }"
            [ngClass]="{'opened':isContextualMenuOpened}"
            [matMenuTriggerFor]="focusedItem ? appMenu : appCreate"
            [matMenuTriggerData]="{item:focusedItem, idx:-1}"
            (menuOpened)="isContextualMenuOpened = true"
            (menuClosed)="isContextualMenuOpened = false"
        >
            <mat-icon class="material-symbols-rounded" *ngIf="focusedItem">more_horiz</mat-icon>
            <mat-icon class="material-symbols-rounded" *ngIf="!focusedItem">add</mat-icon>
        </button>

        <label class="cursor-position" *ngIf="cursorPosition" >
            {{cursorPosition.x.toFixed(cursorPosition.decimals)}},
            {{cursorPosition.y.toFixed(cursorPosition.decimals)}}
        </label>

        <label class="hover-position" *ngIf="!cursorPosition && hoverPosition && !isEditingImages" >
            {{hoverPosition.x.toFixed(3)}},
            {{hoverPosition.y.toFixed(3)}}
        </label>

        <button mat-mini-fab *ngIf="(focusedImage && !cfg.preview && !dragging)"
            color="accent"
            class="add-button"
            [ngStyle]="{
                'left': 8 + (max(focusedImage.x1,focusedImage.x2) - cfg.viewPortX)/strokeWidth+'px',
                'top': 8 + (max(focusedImage.y1,focusedImage.y2) - cfg.viewPortY)/strokeWidth+'px'
            }"
            [ngClass]="{'opened':isContextualMenuOpened}"
            [matMenuTriggerFor]="appImage"
            [matMenuTriggerData]="{image:focusedImage}"
            (menuOpened)="isContextualMenuOpened = true"
            (menuClosed)="isContextualMenuOpened = false"
        >
            <mat-icon class="material-symbols-rounded">more_horiz</mat-icon>
        </button>

        <div class="scene-top-actions">
            <button mat-mini-fab
                color="primary"
                matTooltip="Urung"
                matTooltipPosition="below"
                (click)="undo()"
                [disabled]="!canUndo()"
            >
                <mat-icon class="material-symbols-rounded">undo</mat-icon>
            </button>
            <button mat-mini-fab
                color="primary"
                matTooltip="Ulang"
                matTooltipPosition="below"
                (click)="redo()"
                [disabled]="!canRedo()"
            >
                <mat-icon class="material-symbols-rounded">redo</mat-icon>
            </button>

            <button mat-mini-fab
                color="primary"
                matTooltip="Pratinjau"
                matTooltipPosition="below"
                (click)="cfg.preview = !cfg.preview"
            >
                <mat-icon class="material-symbols-rounded"> {{ cfg.preview ? 'image' : 'hide_image' }}</mat-icon>
            </button>

            <app-upload-image
                [class.displayed]="isEditingImages"
                class="add-image-button"
                (addImage)="addImage($event)"
                (cancel)="cancelAddImage()"
                #uploader
            ></app-upload-image>

            <button mat-mini-fab
                [color]="isEditingImages ? 'accent' : 'primary'"
                [matTooltip]="isEditingImages ? '' : 'Beralih ke mode pengelolaan gambar'"
                matTooltipPosition="below"
                style="margin-right: 8px"
                (click)="toggleImageEditing(uploader)"
            >
                <mat-icon class="material-symbols-rounded">add_photo_alternate</mat-icon>
            </button>

            <app-export [path]="rawPath" [name]="pathName || '' " style="margin-right: 8px"></app-export>
            <app-share [path]="rawPath"></app-share>
        </div>
        <div class="scene-bottom-actions">
            <button
                mat-mini-fab
                color="primary"
                (click)="cfg.snapToGrid = !cfg.snapToGrid"
                matTooltip="Kaitkan ke kisi"
                matTooltipPosition="left"
            >
                <mat-icon class="material-symbols-rounded"> {{ cfg.snapToGrid ? 'grid_on' : 'grid_off' }}</mat-icon>
            </button>
            <button
                mat-mini-fab
                color="primary"
                (click)="cfg.viewPortLocked=false;canvas?.zoomViewPort(9/10)"
                matTooltip="Perbesar"
                matTooltipPosition="left"
            >
                <mat-icon class="material-symbols-rounded">zoom_in</mat-icon>
            </button>
            <button
                mat-mini-fab
                color="primary"
                (click)="cfg.viewPortLocked=false;canvas?.zoomViewPort(10/9)"
                matTooltip="Perkecil"
                matTooltipPosition="left"
            >
                <mat-icon class="material-symbols-rounded">zoom_out</mat-icon>
            </button>
            <button
                mat-mini-fab
                color="primary"
                (click)="cfg.viewPortLocked=false;zoomAuto()"
                matTooltip="Sesuaikan ke Layar"
                matTooltipPosition="left"
            >
                <mat-icon class="material-symbols-rounded">fit_screen</mat-icon>
            </button>
        </div>

        <svg
            xmlns="http://www.w3.org/2000/svg"
            xmlns:xlink="http://www.w3.org/1999/xlink"
            app-canvas
            [attr.viewBox]="cfg.viewPortX+' '+cfg.viewPortY+' '+cfg.viewPortWidth+' '+cfg.viewPortHeight"
            [ngClass]="{preview:cfg.preview}"

            [parsedPath]="parsedPath"
            [targetPoints]="targetPoints"
            [controlPoints]="controlPoints"
            [(draggedPoint)]="draggedPoint"
            (focusedItemChange)="focusItem($event)"
            [focusedItem]="focusedItem"
            [(hoveredItem)]="hoveredItem"
            [(wasCanvasDragged)]="wasCanvasDragged"
            [draggedIsNew]="draggedIsNew"
            [decimals]="decimals"
            [viewPortX]="cfg.viewPortX"
            [viewPortY]="cfg.viewPortY"
            [viewPortWidth]="cfg.viewPortWidth"
            [viewPortHeight]="cfg.viewPortHeight"
            [strokeWidth]="strokeWidth"
            [preview]="cfg.preview"
            [filled]="cfg.filled"
            [showTicks]="cfg.showTicks"
            [tickInterval]="cfg.tickInterval"
            (afterModelChange)="afterModelChange()"
            (dragging)="setIsDragging($event)"
            (canvasWidthChange)="canvasWidth = $event || canvasWidth"
            (canvasHeightChange)="canvasHeight = $event"
            (emptyCanvas)="isLeftPanelOpened = false"
            (viewPort)="updateViewPort($event.x, $event.y, $event.w, $event.h, $event.force)"
            [editImages]="isEditingImages"
            [images]="images"
            [(focusedImage)]="focusedImage"
            (cursorPosition)="setCursorPosition($event)"
            (hoverPosition)="setHoverPosition($event)"
        ></svg>
    </div>
</div>


<div *ngIf="isLeftPanelOpened"  class="footer">
    <a href="https://github.com/mcikadu-dev/svg-path-editor" target="_blank">
        <mat-icon svgIcon="github"></mat-icon> GitHub
    </a>
    <a href="https://github.com/sponsors/Yqnn" target="_blank">
        <mat-icon svgIcon="sponsor" class="sponsor"></mat-icon> Sponsor
    </a>
</div>

<app-import (importPath)="openPath($event, '')"></app-import>

<mat-menu #appMenu="matMenu"  xPosition="before">
    <ng-template matMenuContent let-item="item"  let-idx="idx">
        <button mat-menu-item [matMenuTriggerFor]="appCreate" [matMenuTriggerData]="{item:item, idx:idx}">
            <mat-icon class="material-symbols-rounded">add</mat-icon>
            Sisipkan setelah
        </button>
        <button mat-menu-item [matMenuTriggerFor]="appCreate" [matMenuTriggerData]="{item:item, idx:idx, convert:true}">
            <mat-icon class="material-symbols-rounded">autorenew</mat-icon>
            Ubah ke
        </button>
        <button mat-menu-item (click)="item.setRelative(!item.relative); afterModelChange();">
            <mat-icon class="material-symbols-rounded">autorenew</mat-icon>
            <ng-container *ngIf="item.relative">Jadikan absolut</ng-container>
            <ng-container *ngIf="!item.relative">Jadikan relatif</ng-container>
        </button>
        <button mat-menu-item (click)="useAsOrigin(item)" [disabled]="!canUseAsOrigin(item)">
            <mat-icon class="material-symbols-rounded">vertical_align_top</mat-icon>
            Mulai path dari sini
        </button>
        <button mat-menu-item (click)="useAsOrigin(item, true)" [disabled]="!canUseAsOrigin(item) || !hasSubPaths()">
            <mat-icon class="material-symbols-rounded">vertical_align_top</mat-icon>
            Mulai subpath dari sini
        </button>
        <button mat-menu-item (click)="reverseSubPath(item)" [disabled]="!hasSubPaths()">
            <mat-icon class="material-symbols-rounded">swap_vert</mat-icon>
            Balikkan subpath
        </button>
        <button mat-menu-item (click)="delete(item)" [disabled]="!canDelete(item)">
            <mat-icon class="material-symbols-rounded">delete</mat-icon> Hapus
        </button>
    </ng-template>
</mat-menu>


<mat-menu #appCreate="matMenu">
    <ng-template matMenuContent let-item="item"  let-idx="idx" let-convert="convert">
        <button mat-menu-item (click)="insert('M', item, convert)" [disabled]="convert?!canConvert(item,'M'):!canInsertAfter(item, 'M')"><strong>M</strong> Pindah ke</button>
        <button mat-menu-item (click)="insert('L', item, convert)" [disabled]="convert?!canConvert(item,'L'):!canInsertAfter(item, 'L')"><strong>L</strong> Garis ke</button>
        <button mat-menu-item (click)="insert('V', item, convert)" [disabled]="convert?!canConvert(item,'V'):!canInsertAfter(item, 'V')"><strong>V</strong> Garis vertikal ke</button>
        <button mat-menu-item (click)="insert('H', item, convert)" [disabled]="convert?!canConvert(item,'H'):!canInsertAfter(item, 'H')"><strong>H</strong> Garis horizontal ke</button>
        <button mat-menu-item (click)="insert('C', item, convert)" [disabled]="convert?!canConvert(item,'C'):!canInsertAfter(item, 'C')"><strong>C</strong> Kurva ke</button>
        <button mat-menu-item (click)="insert('S', item, convert)" [disabled]="convert?!canConvert(item,'S'):!canInsertAfter(item, 'S')"><strong>S</strong> Kurva singkat ke</button>
        <button mat-menu-item (click)="insert('Q', item, convert)" [disabled]="convert?!canConvert(item,'Q'):!canInsertAfter(item, 'Q')"><strong>Q</strong> Kurva bezier kuadratik ke</button>
        <button mat-menu-item (click)="insert('T', item, convert)" [disabled]="convert?!canConvert(item,'T'):!canInsertAfter(item, 'T')"><strong>T</strong> Kurva bezier kuadratik singkat ke</button>
        <button mat-menu-item (click)="insert('A', item, convert)" [disabled]="convert?!canConvert(item,'A'):!canInsertAfter(item, 'A')"><strong>A</strong> Busur elips</button>
        <button mat-menu-item (click)="insert('Z', item, convert)" [disabled]="convert?!canConvert(item,'Z'):!canInsertAfter(item, 'Z')"><strong>Z</strong> Tutup path</button>
    </ng-template>
</mat-menu>


<mat-menu #appImage="matMenu">
    <ng-template matMenuContent let-image="image">
        <div mat-menu-item [disableRipple]="true" (click)="$event.stopPropagation()">
            <mat-icon class="material-symbols-rounded">opacity</mat-icon>
            <ng-container>Pengaburan</ng-container>
            <div style="display:inline-block; width:180px;">
                <mat-slider min="0" max="1" step="0.01" style="margin:0 16px; min-width:100px" color="accent">
                    <input matSliderThumb [(ngModel)]="image.opacity">
                </mat-slider>
                {{image.opacity}}
            </div>
        </div>
        <button mat-menu-item (click)="image.preserveAspectRatio = !image.preserveAspectRatio; $event.stopPropagation()">
            <mat-icon class="material-symbols-rounded">aspect_ratio</mat-icon>
            <ng-container>Pertahankan rasio aspek</ng-container>
        </button>
        <button mat-menu-item (click)="deleteImage(image)">
            <mat-icon class="material-symbols-rounded">delete</mat-icon> Hapus
        </button>
    </ng-template>
</mat-menu>
